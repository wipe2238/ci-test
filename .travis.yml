os: linux
language: cpp
sudo: required

git:
 depth: false

matrix:
 include:
  - compiler: g++-4.9
  - compiler: g++-4.8

matrix:
 allow_failures:
  - compiler: g++-4.9
  - compiler: g++-4.8

before_install:
 - sudo add-apt-repository --yes ppa:ubuntu-toolchain-r/test
 - sudo apt-get update
 - set
 - sudo apt-get install linux-libc-dev:i386 ${TRAVIS_COMPILER}-multilib

install:
 - cmake -DCMAKELISTS=${TRAVIS_BUILD_DIR}/CMakeLists.txt -DCMAKEDIR=${HOME}/cmake -P cmake/CI/UpdateCMake.cmake && export PATH=${HOME}/cmake/bin:$PATH

script:
 - cd ${TRAVIS_BUILD_DIR}/build
 - cmake -DCMAKE_BUILD_TYPE=${BUILD} -DCMAKE_CXX_COMPILER=${COMPILER} -DCMAKE_CXX_FLAGS=-m${ARCH} ..
 - make
